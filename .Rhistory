library(tidyverse)
library(here)
library(readxl)
getwd()
read.xlsx(here("data/occ_gender_shares.xlsx"))
gend_shares <- read_excel(here("data/occ_gender_shares.xlsx"))
gend_shares
gend_shares <- read_excel(here("data/occ_gender_shares.xlsx"), header = TRUE)
?read_excel
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"))
gend_shres
gend_sahres
gend_shares
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv'))
ipums
ipums %>% tibble
setdiff(ipums$labels, gend_shares$Occupation)
gend_shares
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1)
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-")
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("character", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
gend_shres
gend_shares
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric")) %>%
select(-`Total employed`)
gend_shares
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric")) %>%
select(-`Total employed`) %>%
rename("Women" = 2, "White" = 3)
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric")) %>%
select(-`Total employed`) %>%
rename("Women" = 2, "White" = 3)
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric")) %>%
select(-`Total employed`) %>%
rename("Women" = 2, "White" = 3, "black_afam" = 4)
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 1, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed)
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed)
read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>% tibble
ipums
setdiff(ipums$labels, gend_shares$occupation)
ipums$labels
ipums$label
setdiff(ipums$label, gend_shares$occupation)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble
setdiff(ipums$label, gend_shares$occupation)
setdiff(gend_shares$occupation, ipums$label)
gend_shares
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
"billing and posting clerks " == "billing and posting clerks "
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(ipums_label = trimws(ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
setdiff(gend_shares$ipums_label, ipums$label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares %>% pull(ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
gend_shares %>% pull(ipums_label)
trimws("automotive and watercraft service attendants   " )
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label))
gend_shares
setdiff(gend_shares$ipums_label, ipums$label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label),
ipums_label = case_when(ipums_label == "billing and posting clerks " ~ "billing and posting clerks"))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label),
ipums_label = case_when(ipums_label == "billing and posting clerks " ~ "billing and posting clerks",
TRUE ~ ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label),
ipums_label = case_when(ipums_label == "billing and posting clerks " ~ "billing and posting clerks",
TRUE ~ ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation),
ipums_label = trimws(ipums_label))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
select(-total_employed) %>%
mutate(occupation = tolower(occupation))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares
gend_shares %>%
filter(!is.na(ipums_label))
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
mutate(occupation = tolower(occupation))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares %>%
filter(!is.na(ipums_label)) %>%
print
gend_shares <- read_xlsx(here("data/occ_gender_shares.xlsx"), skip = 2, na = "-",
col_types = c("text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"),
col_names = c("occupation", "ipums_label", "total_employed", "women_pct", "white_pct", "black_afam_pct", "asian_pct", "hispanic_latinx_pct")) %>%
mutate(occupation = tolower(occupation))
ipums <- read.csv(here('dRC_Replication/data/ipums_variables.csv')) %>%
tibble %>%
mutate(label = trimws(label))
setdiff(gend_shares$ipums_label, ipums$label)
setdiff(ipums$label, gend_shares$ipums_label)
gend_shares %>%
filter(!is.na(ipums_label)) %>%
print
gend_shares %>%
filter(!is.na(ipums_label)) %>%
group_by(ipums_label) %>%
filter(all(is.na(women_pct)))
gend_shares %>%
filter(!is.na(ipums_label)) %>% View()
